import{a as B}from"./chunk-CCF26XPT.js";import{a as O}from"./chunk-PKKS7OUU.js";import{a as L}from"./chunk-7IKGSREM.js";import{l as j}from"./chunk-AGM7ZMZ5.js";import{B as m,D as y,Fa as T,Ga as l,Ha as v,Ia as k,K as x,L as f,Na as E,Oa as I,Pa as P,Ta as A,V as W,Va as R,X as a,ba as w,ga as u,ia as _,ma as h,na as g,oa as C,pa as S,qa as r,ra as c,sa as p,ub as V,va as b,xa as F,ya as d}from"./chunk-KIN36VHZ.js";var $=t=>["/details",t],D=()=>[1,2,3,4,5],U=()=>["/home"];function z(t,s){if(t&1){let i=b();r(0,"i",14),F("click",function(){x(i);let e=d().$implicit,n=d(2);return f(n.removeProductFromFav(e._id))}),c()}}function G(t,s){t&1&&(r(0,"span"),p(1,"i",15),c())}function Y(t,s){t&1&&p(0,"i",11)}function q(t,s){if(t&1){let i=b();r(0,"div",3)(1,"div",4),u(2,z,1,0,"i",5),r(3,"div",6)(4,"div"),p(5,"img",7),r(6,"h3",8),l(7),c(),r(8,"h4",9),l(9),A(10,"text"),c()(),r(11,"div",10)(12,"span"),l(13),c(),r(14,"div"),C(15,G,2,0,"span",null,g),u(17,Y,1,0,"i",11),r(18,"span",12),l(19),c()()()(),r(20,"button",13,0),F("click",function(){let e=x(i).$implicit,n=T(21),M=d(2);return f(M.getCart(e.id,n))}),l(22,"Add to cart"),c()()()}if(t&2){let i=s.$implicit,o=d(2);a(2),h(2,o.productsIdInFav.includes(i._id)?2:-1),a(),_("routerLink",P(12,$,i.id)),a(2),_("src",i.imageCover,W)("alt",i.title),a(2),v(i==null||i.category==null?null:i.category.name),a(2),v(R(10,9,i.title,2)),a(4),k("",i.price," EGP"),a(2),S(I(14,D).slice(0,i.ratingsAverage)),a(2),h(17,i.ratingsAverage%1!==0?17:-1),a(2),v(i.ratingsAverage)}}function H(t,s){if(t&1&&(r(0,"section",1)(1,"div",2),C(2,q,23,15,"div",3,g),c()()),t&2){let i=d();a(2),S(i.products)}}function J(t,s){t&1&&(r(0,"section",16)(1,"h1",17),l(2,"Your Wishlist is empty!"),c(),p(3,"img",18),r(4,"p",19),l(5,"It looks like you haven't added anything to your Wishlist yet."),c(),r(6,"button",20),l(7,"Continue Shopping"),c()()),t&2&&(a(6),_("routerLink",I(1,U)))}var nt=(()=>{let s=class s{constructor(){this._CartService=m(L),this._ToastrService=m(j),this._WishlistService=m(O),this._Renderer2=m(w),this.products=[],this.productsIdInFav=[]}ngOnInit(){this._WishlistService.getUserWishlist().subscribe({next:o=>{this.products=o.data;let e=this.products.map(n=>n._id);this.productsIdInFav=e,this._WishlistService.countOfProductsInWishlist.next(o.count)},error:o=>{console.log(o)}})}getCart(o,e){this._Renderer2.setAttribute(e,"disabled","true"),this._CartService.goToCart(o).subscribe({next:n=>{console.log(n),this._CartService.countProductsInCart.next(n.numOfCartItems),this._Renderer2.removeAttribute(e,"disabled"),this._ToastrService.success(n.message,"Fresh cart",{progressBar:!0,progressAnimation:"increasing"})},error:n=>{console.log(n),this._Renderer2.removeAttribute(e,"disabled")}})}removeProductFromFav(o){this._WishlistService.removeProductFromWishlist(o).subscribe({next:e=>{this.productsIdInFav=e.data,this.products=this.products.filter(n=>this.productsIdInFav.includes(n._id)),this._WishlistService.countOfProductsInWishlist.next(e.data.length),this._ToastrService.error("Item deleted from your wishlist","Fresh cart")},error:e=>{console.log(e)}})}};s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=y({type:s,selectors:[["app-wishlist"]],standalone:!0,features:[E],decls:2,vars:1,consts:[["element",""],[1,"w-75","mx-auto","py-4"],[1,"row","g-4"],[1,"col-md-4"],[1,"product","position-relative","p-2","rounded"],[1,"fa-solid","fa-heart","heart","position-absolute"],[3,"routerLink"],[1,"w-100","rounded","object-fit-fill",3,"src","alt"],[1,"small","text-main","mt-5"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fa-regular","fa-star-half-stroke","rating-color","stars-landing"],[1,"text-muted"],[1,"btn-main","w-100",3,"click"],[1,"fa-solid","fa-heart","heart","position-absolute",3,"click"],[1,"fa","fa-star","rating-color"],[1,"content","bg-light-main","shadow","mx-auto","w-50","rounded","rounded-4","p-4","my-3","mt-5","text-center"],[1,"mb-3"],["src","../../../assets/images/wishlist.webp","alt","",1,"w-50"],[1,"text-main"],[1,"btn-main",3,"routerLink"]],template:function(e,n){e&1&&u(0,H,4,0,"section",1)(1,J,8,2),e&2&&h(0,n.products.length>0?0:1)},dependencies:[V,B],styles:["section[_ngcontent-%COMP%]{margin-top:80px}"]});let t=s;return t})();export{nt as WishlistComponent};
