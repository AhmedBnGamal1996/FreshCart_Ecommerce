import{a as J}from"./chunk-6G2RBJQQ.js";import{a as q}from"./chunk-3G2AMW22.js";import{a as H}from"./chunk-CCF26XPT.js";import{a as $}from"./chunk-PKKS7OUU.js";import{a as N,c as U,f as z,k as G}from"./chunk-2MXGKPI7.js";import{a as D}from"./chunk-7IKGSREM.js";import{l as K}from"./chunk-AGM7ZMZ5.js";import{B as d,D as T,Fa as A,Ga as m,Ha as f,Ia as E,Ja as M,K as u,Ka as V,L as p,La as O,Na as L,Oa as B,Pa as R,Ta as F,V as W,Va as I,X as a,ba as y,ga as C,ia as S,ma as _,na as k,oa as b,pa as P,qa as s,ra as c,sa as h,ub as j,va as g,xa as v,ya as l}from"./chunk-KIN36VHZ.js";var Q=(i,o)=>o.id,X=i=>["/details",i],Y=()=>[1,2,3,4,5];function Z(i,o){if(i&1){let r=g();s(0,"i",14),v("click",function(){u(r);let t=l().$implicit,n=l();return p(n.getWishlist(t._id))}),c()}}function tt(i,o){if(i&1){let r=g();s(0,"i",14),v("click",function(){u(r);let t=l().$implicit,n=l();return p(n.removeProductFromFav(t._id))}),c()}}function et(i,o){i&1&&(s(0,"span"),h(1,"i",15),c())}function it(i,o){i&1&&h(0,"i",11)}function rt(i,o){if(i&1){let r=g();s(0,"div",3)(1,"div",4),C(2,Z,1,0,"i",5)(3,tt,1,0,"i",5),s(4,"div",6)(5,"div"),h(6,"img",7),s(7,"h3",8),m(8),c(),s(9,"h4",9),m(10),F(11,"text"),c()(),s(12,"div",10)(13,"span"),m(14),c(),s(15,"div"),b(16,et,2,0,"span",null,k),C(18,it,1,0,"i",11),s(19,"span",12),m(20),c()()()(),s(21,"button",13,0),v("click",function(){let t=u(r).$implicit,n=A(22),w=l();return p(w.getCart(t.id,n))}),m(23,"Add to cart"),c()()()}if(i&2){let r=o.$implicit,e=l();a(2),_(2,e.productsIdInFav.includes(r._id)?-1:2),a(),_(3,e.productsIdInFav.includes(r._id)?3:-1),a(),S("routerLink",R(13,X,r.id)),a(2),S("src",r.imageCover,W)("alt",r.title),a(2),f(r.category.name),a(2),f(I(11,10,r.title,2)),a(4),E("",r.price," EGP"),a(2),P(B(15,Y).slice(0,r.ratingsAverage)),a(2),_(18,r.ratingsAverage%1!==0?18:-1),a(2),f(r.ratingsAverage)}}var gt=(()=>{let o=class o{constructor(){this._ProductsService=d(q),this._CartService=d(D),this._ToastrService=d(K),this._WishlistService=d($),this._Renderer2=d(y),this.text="",this.productsIdInFav=[],this.productsList=[]}ngOnInit(){this._ProductsService.getAllproducts().subscribe({next:e=>{console.log(e),this.productsList=e.data},error:e=>{console.log(e)}}),this._WishlistService.getUserWishlist().subscribe({next:e=>{console.log(e),this._WishlistService.countOfProductsInWishlist.next(e.count)},error:e=>{console.log(e)}}),this._CartService.getProductsCart().subscribe({next:e=>{this._CartService.countProductsInCart.next(e.numOfCartItems)}})}getCart(e,t){this._Renderer2.setAttribute(t,"disabled","true"),this._CartService.goToCart(e).subscribe({next:n=>{console.log(n),this._CartService.countProductsInCart.next(n.numOfCartItems),this._Renderer2.removeAttribute(t,"disabled"),this._ToastrService.success(n.message,"Fresh cart",{progressBar:!0,progressAnimation:"increasing"})},error:n=>{console.log(n),this._Renderer2.removeAttribute(t,"disabled")}})}getWishlist(e){this._WishlistService.addProductToWishlist(e).subscribe({next:t=>{console.log(t),this.productsIdInFav=t.data,this._WishlistService.countOfProductsInWishlist.next(t.data.length),this._ToastrService.info(t.message,"Fresh cart",{progressBar:!0,progressAnimation:"increasing"})},error:t=>{console.log(t)}})}removeProductFromFav(e){this._WishlistService.removeProductFromWishlist(e).subscribe({next:t=>{this.productsIdInFav=t.data,this._WishlistService.countOfProductsInWishlist.next(t.data.length)},error:t=>{console.log(t)}})}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=T({type:o,selectors:[["app-product"]],standalone:!0,features:[L],decls:6,vars:4,consts:[["element",""],["type","search","placeholder","Search by name.....","id","",1,"form-control","mx-auto","p-2","mb-4","w-50",3,"ngModelChange","ngModel"],[1,"row","g-3"],[1,"col-md-2"],[1,"product","position-relative","p-2","rounded"],[1,"fa-solid","fa-heart","heart","position-absolute"],[3,"routerLink"],[1,"w-100","rounded","object-fit-fill",3,"src","alt"],[1,"small","text-main","mt-3"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fa-regular","fa-star-half-stroke","rating-color","stars-landing"],[1,"text-muted"],[1,"btn-main","w-100",3,"click"],[1,"fa-solid","fa-heart","heart","position-absolute",3,"click"],[1,"fa","fa-star","rating-color"]],template:function(t,n){t&1&&(s(0,"section")(1,"input",1),O("ngModelChange",function(x){return V(n.text,x)||(n.text=x),x}),c(),s(2,"div",2),b(3,rt,24,16,"div",3,Q),F(5,"search"),c()()),t&2&&(a(),M("ngModel",n.text),a(2),P(I(5,1,n.productsList,n.text)))},dependencies:[j,H,J,G,N,U,z],styles:["section[_ngcontent-%COMP%]{margin-top:100px}.form-control[_ngcontent-%COMP%]{box-shadow:0 0 10px #11bd1168}"]});let i=o;return i})();export{gt as ProductComponent};
