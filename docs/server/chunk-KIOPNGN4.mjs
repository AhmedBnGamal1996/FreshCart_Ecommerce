import './polyfills.server.mjs';
import{a as D}from"./chunk-PMCYWXXA.mjs";import"./chunk-GTSSCL6B.mjs";import{a as T,b as u,c as I,d as w,g as x,h as N,i as R,j as A,l as q}from"./chunk-GVTV3WQQ.mjs";import{a as g}from"./chunk-WVUI6REW.mjs";import{$ as a,B as F,Ba as y,Eb as O,Ka as l,Qb as k,Ra as S,Tb as E,ka as f,ma as v,qa as _,u as b,ua as s,va as n,wa as c,x as C,y as m}from"./chunk-XJ52H6M5.mjs";import"./chunk-VVCT4QZE.mjs";var $=(()=>{let t=class t{constructor(r){this._HttpClient=r,this.idCash=""}checkOut(r,e){return this._HttpClient.post(`${g.baseUrl}/api/v1/orders/checkout-session/${r}?url=${g.urlServer}`,{shippingAddress:e})}checkOutCash(r,e){return this._HttpClient.post(`${g.baseUrl}/api/v1/orders/${r}`,{shippingAddress:e})}};t.\u0275fac=function(e){return new(e||t)(C(O))},t.\u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function G(i,t){i&1&&(s(0,"div",6)(1,"p",15),l(2," Details is requiered "),n()())}function M(i,t){i&1&&(s(0,"div",6)(1,"p",15),l(2," Phone is requiered "),n()())}function P(i,t){i&1&&(s(0,"div",6)(1,"p",15),l(2," City is requiered "),n()())}var Y=(()=>{let t=class t{constructor(){this._FormBuilder=m(A),this._ActivatedRoute=m(k),this._OrdersService=m($),this._Router=m(E),this._ToastrService=m(D),this.ordersForm=this._FormBuilder.group({details:[null,[u.required]],phone:[null,[u.required,u.pattern(/^01[0125][0-9]{8}$/)]],city:[null,[u.required]]}),this.cartId="",this.cashId=""}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:r=>{this.cartId=r.get("id"),this.cashId=r.get("id"),console.log(this.cartId)},error:r=>{console.log(r)}})}orderOnlineSubmit(r){console.log(this.ordersForm.value),r.valid&&this._OrdersService.checkOut(this.cartId,this.ordersForm.value).subscribe({next:e=>{console.log(this.ordersForm.value),console.log(e),e.status=="success"&&window.open(e.session.url,"_self")},error:e=>{console.log(e),this._ToastrService.error("cart is empty","Fresh cart")}})}orderCashSubmit(r){r.valid&&this._OrdersService.checkOutCash(this.cashId,this.ordersForm.value).subscribe({next:e=>{console.log(this.ordersForm.value),e.status=="success"&&this._Router.navigate(["/allorders"])},error:e=>{this._ToastrService.error("cart is empty","Fresh cart"),console.log(e)}})}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=F({type:t,selectors:[["app-orders"]],standalone:!0,features:[S],decls:28,vars:6,consts:[[1,"bg-main-light","my-2","p-2","shadow","w-75","m-auto","mt-4"],[1,"text-center"],[3,"formGroup"],[1,"my-1"],["for","details"],["id","details","formControlName","details",1,"form-control"],[1,"alert","alert-danger","w-50"],["for","phone"],["type","tel","id","phone","formControlName","phone",1,"form-control"],["for","city"],["type","text","id","city","formControlName","city",1,"form-control"],[1,"div","d-flex","align-items-center","justify-content-between"],[1,"btn-main","mt-2",3,"click","disabled"],[1,"fa-solid","fa-truck"],[1,"fa-brands","fa-cc-amazon-pay"],[1,"m-0"]],template:function(e,o){if(e&1&&(s(0,"section",0)(1,"h1",1),l(2,"Shipping Address"),n(),s(3,"form",2)(4,"div",3)(5,"label",4),l(6,"Details"),n(),c(7,"textarea",5),f(8,G,3,0,"div",6),n(),s(9,"div",3)(10,"label",7),l(11,"Phone"),n(),c(12,"input",8),f(13,M,3,0,"div",6),n(),s(14,"div",3)(15,"label",9),l(16,"City"),n(),c(17,"input",10),f(18,P,3,0,"div",6),n(),s(19,"div",11)(20,"button",12),y("click",function(){return o.orderCashSubmit(o.ordersForm)}),l(21,"Pay on delivery "),s(22,"span"),c(23,"i",13),n()(),s(24,"button",12),y("click",function(){return o.orderOnlineSubmit(o.ordersForm)}),l(25," Pay online "),s(26,"span"),c(27,"i",14),n()()()()()),e&2){let d,p,h;a(3),v("formGroup",o.ordersForm),a(5),_(8,(d=o.ordersForm.get("details"))!=null&&d.errors&&((d=o.ordersForm.get("details"))!=null&&d.touched)?8:-1),a(5),_(13,(p=o.ordersForm.get("phone"))!=null&&p.errors&&((p=o.ordersForm.get("phone"))!=null&&p.touched)?13:-1),a(5),_(18,(h=o.ordersForm.get("city"))!=null&&h.errors&&((h=o.ordersForm.get("city"))!=null&&h.touched)?18:-1),a(2),v("disabled",!o.ordersForm.valid),a(4),v("disabled",!o.ordersForm.valid)}},dependencies:[q,x,T,I,w,N,R],styles:["h1[_ngcontent-%COMP%]{font-family:Georgia,Times New Roman,Times,serif}"]});let i=t;return i})();export{Y as OrdersComponent};
