import './polyfills.server.mjs';
import{a as F}from"./chunk-QSJJTECV.mjs";import{a as E,b as u,c as M,d as T,e as y,g as V,h as A,i as N,j as R,l as G}from"./chunk-GVTV3WQQ.mjs";import"./chunk-WVUI6REW.mjs";import{$ as m,B as v,Ba as C,Ca as l,I as _,J as f,Ka as a,La as h,Ra as S,Tb as b,ka as c,ma as g,qa as d,ua as n,va as r,wa as x,y as p,za as w}from"./chunk-XJ52H6M5.mjs";import"./chunk-VVCT4QZE.mjs";function B(t,s){if(t&1&&(n(0,"p",9),a(1),r()),t&2){let o=l(2);m(),h(o.userMsg)}}function D(t,s){if(t&1){let o=w();n(0,"form",4),C("ngSubmit",function(){_(o);let e=l();return f(e.forgetPassword())}),n(1,"label",5),a(2,"Email"),r(),x(3,"input",6),n(4,"div",7)(5,"button",8),a(6,"Forget Password "),r()(),c(7,B,2,1,"p",9),r()}if(t&2){let o=l();g("formGroup",o.forgetForm),m(7),d(7,o.userMsg?7:-1)}}function I(t,s){if(t&1&&(n(0,"p",13),a(1),r()),t&2){let o=l(2);m(),h(o.userMsg)}}function k(t,s){if(t&1){let o=w();n(0,"form",4),C("ngSubmit",function(){_(o);let e=l();return f(e.resetCode())}),n(1,"label",10),a(2,"Reset Code"),r(),x(3,"input",11),n(4,"div",7)(5,"button",12),a(6,"Reset Code"),r()(),c(7,I,2,1,"p",13),r()}if(t&2){let o=l();g("formGroup",o.resetCodeForm),m(7),d(7,o.userMsg?7:-1)}}function q(t,s){if(t&1&&(n(0,"p",16),a(1),r()),t&2){let o=l(2);m(),h(o.userMsg)}}function $(t,s){t&1&&(n(0,"p",17),a(1,"Password must be at least 6 characters"),r())}function j(t,s){if(t&1){let o=w();n(0,"form",4),C("ngSubmit",function(){_(o);let e=l();return f(e.newPassword())}),n(1,"label",14),a(2,"Reset Password"),r(),x(3,"input",15),n(4,"div",7)(5,"button",12),a(6,"Reset Password"),r()(),c(7,q,2,1,"p",16)(8,$,2,0,"p",17),r()}if(t&2){let o,i=l();g("formGroup",i.resetPassword),m(7),d(7,i.userMsg?7:-1),m(),d(8,(o=i.resetPassword.get("newPassword"))!=null&&o.getError("pattern")?8:-1)}}var L=(()=>{let s=class s{constructor(){this._AuthService=p(F),this._Router=p(b),this._FormBuilder=p(R),this.step1=!0,this.step2=!1,this.step3=!1,this.email="",this.userMsg="",this.forgetForm=this._FormBuilder.group({email:[null,[u.required,u.email]]}),this.resetCodeForm=this._FormBuilder.group({resetCode:[null,[u.required,u.pattern(/^[0-9]{6}$/)]]}),this.resetPassword=this._FormBuilder.group({newPassword:new y("",[u.pattern(/^[a-zA-Z0-9_@]{6,}$/)])})}forgetPassword(){let i=this.forgetForm.value;this.email=i.email,this._AuthService.forgetPassword(i).subscribe({next:e=>{console.log(e),this.userMsg=e.message,this.step1=!1,this.step2=!0},error:e=>{this.userMsg=e.error.message}})}resetCode(){let i=this.resetCodeForm.value;this._AuthService.resetCode(i).subscribe({next:e=>{console.log(e),this.userMsg=e.status,this.step2=!1,this.step3=!0},error:e=>{this.userMsg=e.error.message}})}newPassword(){let i=this.resetPassword.value;i.email=this.email,this._AuthService.resetPassword(i).subscribe({next:e=>{console.log(e),e.token&&(this._AuthService.saveUserData(),localStorage.setItem("userToken",e.token),this._Router.navigate(["/home"]))},error:e=>{this.userMsg=e.error.message}})}};s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=v({type:s,selectors:[["app-forgo-password"]],standalone:!0,features:[S],decls:7,vars:3,consts:[[1,"container"],[1,"mx-auto"],[1,"text-center","text-main","my-3","mb-5"],[1,"bg-main-light","shadow","rounded-4","p-3",3,"formGroup"],[1,"bg-main-light","shadow","rounded-4","p-3",3,"ngSubmit","formGroup"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control"],[1,"text-center"],[1,"btn-main","w-25","mt-2"],[1,"alert","alert-danger","w-50","mx-auto","p-1","mb-0","mt-2"],["for","resetCode"],["formControlName","resetCode","type","text","id","resetCode",1,"form-control"],[1,"btn-main","w-25","mt-3"],[1,"alert","alert-danger","w-50","mx-auto","p-1","mb-0","mt-2","text-center"],["for","newPassword"],["formControlName","newPassword","type","password","id","newPassword",1,"form-control"],[1,"alert","alert-success","w-50","mx-auto","p-1","mb-0","mt-2","text-center"],[1,"mb-0","alert","alert-danger","mt-2","w-50","text-center"]],template:function(e,P){e&1&&(n(0,"div",0)(1,"section",1)(2,"h1",2),a(3,"Forget\xA0Password"),r(),c(4,D,8,2,"form",3)(5,k,8,2,"form",3)(6,j,9,3,"form",3),r()()),e&2&&(m(4),d(4,P.step1?4:-1),m(),d(5,P.step2?5:-1),m(),d(6,P.step3?6:-1))},dependencies:[G,V,E,M,T,A,N],styles:["h1[_ngcontent-%COMP%]{font-family:Georgia,Times New Roman,Times,serif}"]});let t=s;return t})();export{L as ForgoPasswordComponent};
