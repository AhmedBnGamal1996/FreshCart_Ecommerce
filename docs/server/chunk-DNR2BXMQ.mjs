import './polyfills.server.mjs';
import{a as L}from"./chunk-Y5VDPUZP.mjs";import{a as M}from"./chunk-PMCYWXXA.mjs";import"./chunk-GTSSCL6B.mjs";import"./chunk-WVUI6REW.mjs";import{$ as d,B as S,Ba as f,Ca as u,I as _,J as C,Ja as x,Ka as l,La as v,Ma as g,Ra as T,Sa as E,Ta as V,Tb as O,Ub as $,Xa as A,Z as w,Za as P,fa as y,ka as k,ma as h,qa as D,sa as I,ta as R,ua as r,va as a,wa as m,xb as F,y as p,za as b}from"./chunk-XJ52H6M5.mjs";import"./chunk-VVCT4QZE.mjs";var j=(o,c)=>c.product.id,B=o=>["/orders",o],G=()=>["/home"];function z(o,c){if(o&1){let i=b();r(0,"div",4)(1,"div",8),m(2,"img",9),a(),r(3,"div",10)(4,"div",11)(5,"h3",12),l(6),a(),r(7,"p",13),l(8),a(),r(9,"button",14,0),f("click",function(){let e=_(i).$implicit,t=x(10),s=u(2);return C(s.removeItemCart(e.product._id,t))}),r(11,"span"),m(12,"i",15),a()()(),r(13,"div",16)(14,"span",17,0),f("click",function(){let e=_(i).$implicit,t=x(10),s=u(2);return C(s.cartCount(e.product._id,e.count+1,t))}),m(16,"i",18),a(),r(17,"span"),l(18),a(),r(19,"span",17,0),f("click",function(){let e=_(i).$implicit,t=x(10),s=u(2);return C(s.cartCount(e.product._id,e.count-1,t))}),m(21,"i",19),a()()()()}if(o&2){let i=c.$implicit;d(2),h("src",i.product.imageCover,w)("alt",i.product.title),d(4),v(i.product.title),d(2),g("Price: ",i.price,""),d(10),v(i.count)}}function N(o,c){if(o&1){let i=b();r(0,"section",1)(1,"h1",2),l(2,"Shop Cart:"),a(),r(3,"h5",3),l(4),A(5,"currency"),a(),I(6,z,22,5,"div",4,j),r(8,"div",5)(9,"button",6),l(10,"CheckOut"),a(),r(11,"button",7,0),f("click",function(){_(i);let e=x(12),t=u();return C(t.clearCartItems(e))}),l(13,"Clear cart"),a()()()}if(o&2){let i=u();d(4),g("Total cart price: ",P(5,2,i.cartDetails==null?null:i.cartDetails.totalCartPrice,"GBP")," "),d(2),R(i.cartDetails==null?null:i.cartDetails.products),d(3),h("routerLink",V(5,B,i.cartDetails==null?null:i.cartDetails._id))}}function U(o,c){o&1&&(r(0,"section",20)(1,"h1",21),l(2,"Your cart is empty!"),a(),m(3,"img",22),r(4,"p",13),l(5,"It looks like you haven't added anything to your cart yet."),a(),r(6,"button",6),l(7,"Continue Shopping"),a()()),o&2&&(d(6),h("routerLink",E(1,G)))}var X=(()=>{let c=class c{constructor(){this._CartService=p(L),this._ToastrService=p(M),this._Router=p(O),this._Renderer2=p(y),this.cartDetails=null}ngOnInit(){this._CartService.getProductsCart().subscribe({next:n=>{this.cartDetails=n.data},error:n=>{console.log(n)}})}removeItemCart(n,e){this._Renderer2.setAttribute(e,"disabled","true"),this._CartService.removeSpecificCartItem(n).subscribe({next:t=>{console.log(t),this._Renderer2.removeAttribute(e,"disabled"),this._CartService.countProductsInCart.next(t.numOfCartItems),this._ToastrService.error("item deleted"),this.cartDetails=t.data},error:t=>{console.log(t),this._Renderer2.removeAttribute(e,"disabled")}})}cartCount(n,e,t){this._Renderer2.removeAttribute(t,"disabled","true"),this._CartService.updateCartCount(n,e).subscribe({next:s=>{console.log(s),this.cartDetails=s.data,this._Renderer2.removeAttribute(t,"disabled")},error:s=>{console.log(s),this._Renderer2.removeAttribute(t,"disabled")}})}clearCartItems(n){this._Renderer2.setAttribute(n,"disabled","true"),this._CartService.clearCartItems().subscribe({next:e=>{console.log(e),e.message==="success"&&(this._Renderer2.removeAttribute(n,"disabled"),this.cartDetails=null,this._CartService.countProductsInCart.next(0))},error:e=>{console.log(e),this._Renderer2.removeAttribute(n,"disabled")}})}};c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=S({type:c,selectors:[["app-cart"]],standalone:!0,features:[T],decls:2,vars:1,consts:[["element",""],[1,"content","bg-light-main","shadow","mx-auto","w-75","rounded","rounded-4","p-4","my-3","mt-5"],[1,"mb-2"],[1,"text-main","fw-light"],[1,"row","mb-2","border-bottom"],[1,"d-flex","align-items-center","justify-content-between"],[1,"btn-main",3,"routerLink"],[1,"btn","btn-danger","mb-2",3,"click"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","align-items-center","justify-content-between"],[1,"div"],[1,"h5","fw-medium"],[1,"text-main"],[1,"btn","p-0",3,"click"],[1,"fa-solid","fa-trash","text-danger"],[1,"div","d-flex","align-items-center","gap-2"],[1,"cursor-pointer",3,"click"],[1,"fa-solid","fa-circle-plus","fa-xl","text-main"],[1,"fa-solid","fa-circle-minus","fa-xl","text-main"],[1,"empty-content","bg-light-main","shadow","mx-auto","w-50","rounded","rounded-4","p-4","my-3","mt-5","text-center"],[1,"mb-4"],["src","./assets/images/cart empty.png","alt","",1,"w-50"]],template:function(e,t){e&1&&k(0,N,14,7,"section",1)(1,U,8,2),e&2&&D(0,!(t.cartDetails==null||t.cartDetails.products==null)&&t.cartDetails.products.length?0:1)},dependencies:[F,$],styles:["h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-family:Georgia,Times New Roman,Times,serif}"]});let o=c;return o})();export{X as CartComponent};
